

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Plotting &mdash; Mu2E 1.0.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  

  
    <link rel="top" title="Mu2E 1.0.0 documentation" href="index.html"/>
        <link rel="prev" title="Fitting Data" href="fitting.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Mu2E
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Mu2E Experiment Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="field_view.html">The Mu2E Magnetic Fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="formula.html">Mathematical Formalism</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataframeprod.html">Prepping Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="fitting.html">Fitting Data</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Plotting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-mu2e.mu2eplots">The <cite>mu2eplots</cite> Module</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Mu2E</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Plotting</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/plotting.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="plotting">
<h1>Plotting<a class="headerlink" href="#plotting" title="Permalink to this headline">¶</a></h1>
<p>One of the main features of this package is the ability to display Mu2E data in an intuitive and
informative manner.  Because much of the analysis performed within this package concerns spatial
distributions, 3D plots are extremely useful.</p>
<div class="section" id="module-mu2e.mu2eplots">
<span id="the-mu2eplots-module"></span><h2>The <cite>mu2eplots</cite> Module<a class="headerlink" href="#module-mu2e.mu2eplots" title="Permalink to this headline">¶</a></h2>
<p>Module for generating Mu2e plots.</p>
<p>This module defines a host of useful functions for generating plots for various Mu2E datasets.  It
is expected that these datasets be in the form of <code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code> objects, and the
independent and dependent variables are strings that correspond to DF columns.  These functions wrap
calls to either <code class="xref py py-mod docutils literal"><span class="pre">matplotlib</span></code> or <code class="xref py py-mod docutils literal"><span class="pre">plotly</span></code>.  The latter has numerous modes, depending on how
the user wants to share the plots.</p>
<p class="rubric">Example</p>
<p>Plotting in a <cite>jupyter notebook</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">import</span> <span class="nn">os</span>
<span class="o">...</span>     <span class="kn">from</span> <span class="nn">mu2e</span> <span class="kn">import</span> <span class="n">mu2e_ext_path</span>
<span class="o">...</span>     <span class="kn">from</span> <span class="nn">mu2e.dataframeprod</span> <span class="kn">import</span> <span class="n">DataFrameMaker</span>
<span class="o">...</span>     <span class="kn">from</span> <span class="nn">mu2e.mu2eplots</span> <span class="kn">import</span> <span class="n">mu2e_plot</span><span class="p">,</span> <span class="n">mu2e_plot3d</span>
<span class="o">...</span>     <span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span> <span class="c"># for embedded mpl plots</span>
<span class="o">...</span>     <span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;figure.figsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span> <span class="c"># make them bigger</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">df</span> <span class="o">=</span> <span class="n">DataFrameMaker</span><span class="p">(</span>
<span class="o">...</span>         <span class="n">mu2e_ext_path</span> <span class="o">+</span> <span class="s">&#39;path/to/Mu2e_DSMap&#39;</span><span class="p">,</span>
<span class="o">...</span>         <span class="n">use_pickle</span> <span class="o">=</span> <span class="bp">True</span>
<span class="o">...</span>     <span class="p">)</span><span class="o">.</span><span class="n">data_frame</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">mu2e_plot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s">&#39;Z&#39;</span><span class="p">,</span> <span class="s">&#39;Bz&#39;</span><span class="p">,</span> <span class="s">&#39;Y==0 and X==0&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">&#39;mpl&#39;</span><span class="p">)</span>
<span class="o">...</span>     <span class="c">#static image of 2D matplotlib plot</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">mu2e_plot3d</span><span class="p">(</span>
<span class="o">...</span>         <span class="n">df</span><span class="p">,</span> <span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Z&#39;</span><span class="p">,</span> <span class="s">&#39;Bz&#39;</span><span class="p">,</span>
<span class="o">...</span>         <span class="s">&#39;R&lt;=800 and Phi==0 and 12700&lt;Z&lt;12900&#39;</span><span class="p">,</span>
<span class="o">...</span>         <span class="n">mode</span><span class="o">=</span><span class="s">&#39;plotly_nb&#39;</span><span class="p">)</span>
<span class="o">...</span>     <span class="c">#interactive 3D plot in plotly for jupyter nb</span>
</pre></div>
</div>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<ul class="last simple">
<li>Allow for **kwargs inheriting from mpl, map them for plotly as well.</li>
<li>Build in more flexibility for particle trapping plots.</li>
<li>Particle animation GraphWidget will not work with updated jupyter, keep an eye on dev.</li>
</ul>
</div>
<p><em>2016 Brian Pollack, Northwestern University</em></p>
<p><a class="reference external" href="mailto:brianleepollack&#37;&#52;&#48;gmail&#46;com">brianleepollack<span>&#64;</span>gmail<span>&#46;</span>com</a></p>
<dl class="function">
<dt id="mu2e.mu2eplots.mu2e_plot">
<code class="descclassname">mu2e.mu2eplots.</code><code class="descname">mu2e_plot</code><span class="sig-paren">(</span><em>df</em>, <em>x</em>, <em>y</em>, <em>conditions=None</em>, <em>mode='mpl'</em>, <em>info=None</em>, <em>savename=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mu2e/mu2eplots.html#mu2e_plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mu2e.mu2eplots.mu2e_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate 2D plots, x vs y.</p>
<p>Generate a 2D plot for a given DF and two columns. An optional selection string is applied to
the data via the <code class="xref py py-func docutils literal"><span class="pre">pandas.DataFrame.query()</span></code> interface, and is added to the title.  This
function supports matplotlib and various plotly plotting modes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> (<em>pandas.DataFrame</em>) &#8211; The input DF, must contain columns with labels corresponding to the
&#8216;x&#8217; and &#8216;y&#8217; args.</li>
<li><strong>x</strong> (<em>str</em>) &#8211; Name of the independent variable.</li>
<li><strong>y</strong> (<em>str</em>) &#8211; Name of the dependent variable.</li>
<li><strong>conditions</strong> (<em>str, optional</em>) &#8211; A string adhering to the <code class="xref py py-mod docutils literal"><span class="pre">numexpr</span></code> syntax used in
<code class="xref py py-func docutils literal"><span class="pre">pandas.DataFrame.query()</span></code>.</li>
<li><strong>mode</strong> (<em>str, optional</em>) &#8211; A string indicating which plotting package and method should be used.
Default is &#8216;mpl&#8217;. Valid values: [&#8216;mpl&#8217;, &#8216;plotly&#8217;, &#8216;plotly_html&#8217;, &#8216;plotly_nb&#8217;]</li>
<li><strong>info</strong> (<em>str, optional</em>) &#8211; Extra information to add to the title.</li>
<li><strong>savename</strong> (<em>str, optional</em>) &#8211; If not <cite>None</cite>, the plot will be saved to the indicated path and
file name.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Nothing.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mu2e.mu2eplots.mu2e_plot3d">
<code class="descclassname">mu2e.mu2eplots.</code><code class="descname">mu2e_plot3d</code><span class="sig-paren">(</span><em>df</em>, <em>x</em>, <em>y</em>, <em>z</em>, <em>conditions=None</em>, <em>mode='mpl'</em>, <em>info=None</em>, <em>save_dir=None</em>, <em>df_fit=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mu2e/mu2eplots.html#mu2e_plot3d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mu2e.mu2eplots.mu2e_plot3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate 3D plots, x and y vs z.</p>
<p>Generate a 3D surface plot for a given DF and three columns. An optional selection string is
applied to the data via the <code class="xref py py-func docutils literal"><span class="pre">pandas.DataFrame.query()</span></code> interface, and is added to the title.
Extra processing is done to plot cylindrical coordinates if that is detected from <cite>conditions</cite>.
This function supports matplotlib and various plotly plotting modes.  If <cite>df_fit</cite> is specified,
<cite>df</cite> is plotted as a a scatter plot, and <cite>df_fit</cite> as a wireframe plot.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> (<em>pandas.DataFrame</em>) &#8211; The input DF, must contain columns with labels corresponding to the
&#8216;x&#8217;, &#8216;y&#8217;, and &#8216;z&#8217; args.</li>
<li><strong>x</strong> (<em>str</em>) &#8211; Name of the first independent variable.</li>
<li><strong>y</strong> (<em>str</em>) &#8211; Name of the second independent variable.</li>
<li><strong>z</strong> (<em>str</em>) &#8211; Name of the dependent variable.</li>
<li><strong>conditions</strong> (<em>str, optional</em>) &#8211; A string adhering to the <code class="xref py py-mod docutils literal"><span class="pre">numexpr</span></code> syntax used in
<code class="xref py py-func docutils literal"><span class="pre">pandas.DataFrame.query()</span></code>.</li>
<li><strong>mode</strong> (<em>str, optional</em>) &#8211; A string indicating which plotting package and method should be used.
Default is &#8216;mpl&#8217;. Valid values: [&#8216;mpl&#8217;, &#8216;plotly&#8217;, &#8216;plotly_html&#8217;, &#8216;plotly_nb&#8217;]</li>
<li><strong>info</strong> (<em>str, optional</em>) &#8211; Extra information to add to the title.</li>
<li><strong>save_dir</strong> (<em>str, optional</em>) &#8211; If not <cite>None</cite>, the plot will be saved to the indicated path. The
file name is automated, based on the input args.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Name of saved image/plot, or None.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mu2e.mu2eplots.mu2e_plot3d_ptrap">
<code class="descclassname">mu2e.mu2eplots.</code><code class="descname">mu2e_plot3d_ptrap</code><span class="sig-paren">(</span><em>df</em>, <em>x</em>, <em>y</em>, <em>z</em>, <em>mode='plotly_nb'</em>, <em>info=None</em>, <em>save_dir=None</em>, <em>color=None</em>, <em>df_xray=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mu2e/mu2eplots.html#mu2e_plot3d_ptrap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mu2e.mu2eplots.mu2e_plot3d_ptrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate 3D scatter plots, typically for visualizing 3D positions of charged particles.</p>
<p>Generate a 3D scatter plot for a given DF and three columns. Due to the large number of points
that are typically plotted, <code class="xref py py-mod docutils literal"><span class="pre">matplotlib</span></code> is not supported.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> (<em>pandas.DataFrame</em>) &#8211; The input DF, must contain columns with labels corresponding to the
&#8216;x&#8217;, &#8216;y&#8217;, and &#8216;z&#8217; args.</li>
<li><strong>x</strong> (<em>str</em>) &#8211; Name of the first variable.</li>
<li><strong>y</strong> (<em>str</em>) &#8211; Name of the second variable.</li>
<li><strong>z</strong> (<em>str</em>) &#8211; Name of the third variable.</li>
<li><strong>mode</strong> (<em>str, optional</em>) &#8211; A string indicating which plotting package and method should be used.
Default is &#8216;mpl&#8217;. Valid values: [&#8216;mpl&#8217;, &#8216;plotly&#8217;, &#8216;plotly_html&#8217;, &#8216;plotly_nb&#8217;]</li>
<li><strong>info</strong> (<em>str, optional</em>) &#8211; Extra information to add to the title.</li>
<li><strong>save_dir</strong> (<em>str, optional</em>) &#8211; If not <cite>None</cite>, the plot will be saved to the indicated path. The
file name is automated, based on the input args.</li>
<li><strong>color</strong> &#8211; (str, optional): Name of fourth varible, represented by color of marker.</li>
<li><strong>df_xray</strong> &#8211; (<code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code>, optional): A seperate DF, representing the geometry of
the material that is typically included during particle simulation.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Name of saved image/plot, or None.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mu2e.mu2eplots.mu2e_plot3d_ptrap_anim">
<code class="descclassname">mu2e.mu2eplots.</code><code class="descname">mu2e_plot3d_ptrap_anim</code><span class="sig-paren">(</span><em>df_group1</em>, <em>x</em>, <em>y</em>, <em>z</em>, <em>df_xray</em>, <em>df_group2=None</em>, <em>color=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mu2e/mu2eplots.html#mu2e_plot3d_ptrap_anim"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mu2e.mu2eplots.mu2e_plot3d_ptrap_anim" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate 3D scatter plots, with a slider widget typically for visualizing 3D positions of
charged particles.</p>
<p>Generate a 3D scatter plot for a given DF and three columns. Due to the large number of points
that are typically plotted, <code class="xref py py-mod docutils literal"><span class="pre">matplotlib</span></code> is not supported. A slider widget is generated,
corresponding to the evolution in time.</p>
<p class="rubric">Notes</p>
<ul class="simple">
<li>Currently many options are hard-coded.</li>
<li>Use <cite>g.plot(fig)</cite> after executing this function.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df_group1</strong> (<em>pandas.DataFrame</em>) &#8211; The input DF, must contain columns with labels corresponding</li>
<li><strong>the 'x', 'y', and 'z' args.</strong> (<em>to</em>) &#8211; </li>
<li><strong>x</strong> (<em>str</em>) &#8211; Name of the first variable.</li>
<li><strong>y</strong> (<em>str</em>) &#8211; Name of the second variable.</li>
<li><strong>z</strong> (<em>str</em>) &#8211; Name of the third variable.</li>
<li><strong>df_xray</strong> &#8211; (<code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code>): A seperate DF, representing the geometry of the
material that is typically included during particle simulation.</li>
<li><strong>df_group2</strong> &#8211; (<code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code>, optional): A seperate DF, representing the geometry
of the material that is typically included during particle simulation.</li>
<li><strong>color</strong> (<em>optional</em>) &#8211; Being implemented...</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">(g, fig) for plotting.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="fitting.html" class="btn btn-neutral" title="Fitting Data" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Brian Pollack.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>