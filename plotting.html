<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Plotting &mdash; Mu2E 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Mu2E 1.0.0 documentation" href="index.html" />
    <link rel="prev" title="Fitting Data" href="fitting.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="plotting">
<h1>Plotting<a class="headerlink" href="#plotting" title="Permalink to this headline">¶</a></h1>
<p>One of the main features of this package is the ability to display Mu2E data in an intuitive and
informative manner.  Because much of the analysis performed within this package concerns spatial
distributions, 3D plots are extremely useful.</p>
<div class="section" id="module-mu2e.mu2eplots">
<span id="the-mu2eplots-module"></span><h2>The <cite>mu2eplots</cite> Module<a class="headerlink" href="#module-mu2e.mu2eplots" title="Permalink to this headline">¶</a></h2>
<p>Module for generating Mu2e plots.</p>
<p>This module defines a host of useful functions for generating plots for various Mu2E datasets.  It
is expected that these datasets be in the form of <code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code> objects, and the
independent and dependent variables are strings that correspond to DF columns.  These functions wrap
calls to either <code class="xref py py-mod docutils literal"><span class="pre">matplotlib</span></code> or <code class="xref py py-mod docutils literal"><span class="pre">plotly</span></code>.  The latter has numerous modes, depending on how
the user wants to share the plots.</p>
<p class="rubric">Example</p>
<dl class="docutils">
<dt>Plotting in a <cite>jupyter notebook</cite>::</dt>
<dd>In [1]: import os
...     from mu2e import mu2e_ext_path
...     from mu2e.dataframeprod import DataFrameMaker
...     from mu2e.mu2eplots import mu2e_plot, mu2e_plot3d
...     %matplotlib inline # for embedded mpl plots
...     plt.rcParams[&#8216;figure.figsize&#8217;] = (12,8) # make them bigger
In [2]: df = DataFrameMaker(mu2e_ext_path+&#8217;datafiles/Mau10/Standard_Maps/Mu2e_DSMap&#8217;,
...                         use_pickle = True).data_frame
In [3]: mu2e_plot(df, &#8216;Z&#8217;, &#8216;Bz&#8217;, &#8216;Y==0 and X==0&#8217;, mode=&#8217;mpl&#8217;) # mpl plot
In [4]: mu2e_plot3d(df, &#8216;R&#8217;, &#8216;Z&#8217;, &#8216;Bz&#8217;, &#8216;R&lt;=800 and Phi==0 and 12700&lt;Z&lt;12900&#8217;,
...                 df_fit=False, mode=&#8217;plotly_nb&#8217;) # plotly plot</dd>
</dl>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<ul class="last simple">
<li>Allow for **kwargs inheriting from mpl, map them for plotly as well.</li>
<li>Build in more flexibility for particle trapping plots.</li>
<li>Particle animation GraphWidget will not work with updated jupyter, keep an eye on dev.</li>
</ul>
</div>
<p><em>2016 Brian Pollack, Northwestern University</em></p>
<p><a class="reference external" href="mailto:brianleepollack&#37;&#52;&#48;gmail&#46;com">brianleepollack<span>&#64;</span>gmail<span>&#46;</span>com</a></p>
<dl class="function">
<dt id="mu2e.mu2eplots.mu2e_plot">
<code class="descclassname">mu2e.mu2eplots.</code><code class="descname">mu2e_plot</code><span class="sig-paren">(</span><em>df</em>, <em>x</em>, <em>y</em>, <em>conditions=None</em>, <em>mode='mpl'</em>, <em>info=None</em>, <em>savename=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mu2e/mu2eplots.html#mu2e_plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mu2e.mu2eplots.mu2e_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate 2D plots, x vs y.</p>
<p>Generate a 2D plot for a given DF and two columns. An optional selection string is applied to
the data via the <code class="xref py py-func docutils literal"><span class="pre">pandas.DataFrame.query()</span></code> interface, and is added to the title.  This
function supports matplotlib and various plotly plotting modes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> (<em>pandas.DataFrame</em>) &#8211; The input DF, must contain columns with labels corresponding to the
&#8216;x&#8217; and &#8216;y&#8217; args.</li>
<li><strong>x</strong> (<em>str</em>) &#8211; Name of the independent variable.</li>
<li><strong>y</strong> (<em>str</em>) &#8211; Name of the dependent variable.</li>
<li><strong>conditions</strong> (<em>str, optional</em>) &#8211; A string adhering to the <code class="xref py py-mod docutils literal"><span class="pre">numexpr</span></code> syntax used in
<code class="xref py py-func docutils literal"><span class="pre">pandas.DataFrame.query()</span></code>.</li>
<li><strong>mode</strong> (<em>str, optional</em>) &#8211; A string indicating which plotting package and method should be used.
Default is &#8216;mpl&#8217;. Valid values: [&#8216;mpl&#8217;, &#8216;plotly&#8217;, &#8216;plotly_html&#8217;, &#8216;plotly_nb&#8217;]</li>
<li><strong>info</strong> (<em>str, optional</em>) &#8211; Extra information to add to the title.</li>
<li><strong>savename</strong> (<em>str, optional</em>) &#8211; If not <cite>None</cite>, the plot will be saved to the indicated path and
file name.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Nothing.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mu2e.mu2eplots.mu2e_plot3d">
<code class="descclassname">mu2e.mu2eplots.</code><code class="descname">mu2e_plot3d</code><span class="sig-paren">(</span><em>df</em>, <em>x</em>, <em>y</em>, <em>z</em>, <em>conditions=None</em>, <em>mode='mpl'</em>, <em>info=None</em>, <em>save_dir=None</em>, <em>df_fit=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mu2e/mu2eplots.html#mu2e_plot3d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mu2e.mu2eplots.mu2e_plot3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate 3D plots, x and y vs z.</p>
<p>Generate a 3D surface plot for a given DF and three columns. An optional selection string is
applied to the data via the <code class="xref py py-func docutils literal"><span class="pre">pandas.DataFrame.query()</span></code> interface, and is added to the title.
Extra processing is done to plot cylindrical coordinates if that is detected from <cite>conditions</cite>.
This function supports matplotlib and various plotly plotting modes.  If <cite>df_fit</cite> is specified,
<cite>df</cite> is plotted as a a scatter plot, and <cite>df_fit</cite> as a wireframe plot.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> (<em>pandas.DataFrame</em>) &#8211; The input DF, must contain columns with labels corresponding to the
&#8216;x&#8217;, &#8216;y&#8217;, and &#8216;z&#8217; args.</li>
<li><strong>x</strong> (<em>str</em>) &#8211; Name of the first independent variable.</li>
<li><strong>y</strong> (<em>str</em>) &#8211; Name of the second independent variable.</li>
<li><strong>z</strong> (<em>str</em>) &#8211; Name of the dependent variable.</li>
<li><strong>conditions</strong> (<em>str, optional</em>) &#8211; A string adhering to the <code class="xref py py-mod docutils literal"><span class="pre">numexpr</span></code> syntax used in
<code class="xref py py-func docutils literal"><span class="pre">pandas.DataFrame.query()</span></code>.</li>
<li><strong>mode</strong> (<em>str, optional</em>) &#8211; A string indicating which plotting package and method should be used.
Default is &#8216;mpl&#8217;. Valid values: [&#8216;mpl&#8217;, &#8216;plotly&#8217;, &#8216;plotly_html&#8217;, &#8216;plotly_nb&#8217;]</li>
<li><strong>info</strong> (<em>str, optional</em>) &#8211; Extra information to add to the title.</li>
<li><strong>save_dir</strong> (<em>str, optional</em>) &#8211; If not <cite>None</cite>, the plot will be saved to the indicated path. The
file name is automated, based on the input args.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Name of saved image/plot, or None.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mu2e.mu2eplots.mu2e_plot3d_ptrap">
<code class="descclassname">mu2e.mu2eplots.</code><code class="descname">mu2e_plot3d_ptrap</code><span class="sig-paren">(</span><em>df</em>, <em>x</em>, <em>y</em>, <em>z</em>, <em>mode='plotly_nb'</em>, <em>info=None</em>, <em>save_dir=None</em>, <em>color=None</em>, <em>xray=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mu2e/mu2eplots.html#mu2e_plot3d_ptrap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mu2e.mu2eplots.mu2e_plot3d_ptrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate 3D scatter plots, typically for visualizing 3D positions of charged particles.</p>
<p>Generate a 3D scatter plot for a given DF and three columns. Due to the large number of points
that are typically plotted, <code class="xref py py-mod docutils literal"><span class="pre">matplotlib</span></code> is not supported.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> (<em>pandas.DataFrame</em>) &#8211; The input DF, must contain columns with labels corresponding to the
&#8216;x&#8217;, &#8216;y&#8217;, and &#8216;z&#8217; args.</li>
<li><strong>x</strong> (<em>str</em>) &#8211; Name of the first variable.</li>
<li><strong>y</strong> (<em>str</em>) &#8211; Name of the second variable.</li>
<li><strong>z</strong> (<em>str</em>) &#8211; Name of the third variable.</li>
<li><strong>mode</strong> (<em>str, optional</em>) &#8211; A string indicating which plotting package and method should be used.
Default is &#8216;mpl&#8217;. Valid values: [&#8216;mpl&#8217;, &#8216;plotly&#8217;, &#8216;plotly_html&#8217;, &#8216;plotly_nb&#8217;]</li>
<li><strong>info</strong> (<em>str, optional</em>) &#8211; Extra information to add to the title.</li>
<li><strong>save_dir</strong> (<em>str, optional</em>) &#8211; If not <cite>None</cite>, the plot will be saved to the indicated path. The
file name is automated, based on the input args.</li>
<li><strong>color</strong> &#8211; (str, optional): Name of fourth varible, represented by color of marker.</li>
<li><strong>xray</strong> &#8211; (<code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code>, optional): A seperate DF, representing the geometry of the
material that is typically included during particle simulation.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Name of saved image/plot, or None.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mu2e.mu2eplots.mu2e_plot3d_ptrap_anim">
<code class="descclassname">mu2e.mu2eplots.</code><code class="descname">mu2e_plot3d_ptrap_anim</code><span class="sig-paren">(</span><em>df_group1</em>, <em>x</em>, <em>y</em>, <em>z</em>, <em>df_xray</em>, <em>df_group2=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mu2e/mu2eplots.html#mu2e_plot3d_ptrap_anim"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mu2e.mu2eplots.mu2e_plot3d_ptrap_anim" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate 3D scatter plots, with a slider widget typically for visualizing 3D positions of
charged particles.</p>
<p>Generate a 3D scatter plot for a given DF and three columns. Due to the large number of points
that are typically plotted, <code class="xref py py-mod docutils literal"><span class="pre">matplotlib</span></code> is not supported. A slider widget is generated,
corresponding to the evolution in time.</p>
<p class="rubric">Notes</p>
<ul class="simple">
<li>Currently many options are hard-coded.</li>
<li>Use <cite>g.plot(fig)</cite> after executing this function.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df_group1</strong> (<em>pandas.DataFrame</em>) &#8211; The input DF, must contain columns with labels corresponding</li>
<li><strong>the 'x', 'y', and 'z' args.</strong> (<em>to</em>) &#8211; </li>
<li><strong>x</strong> (<em>str</em>) &#8211; Name of the first variable.</li>
<li><strong>y</strong> (<em>str</em>) &#8211; Name of the second variable.</li>
<li><strong>z</strong> (<em>str</em>) &#8211; Name of the third variable.</li>
<li><strong>df_xray</strong> &#8211; (<code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code>): A seperate DF, representing the geometry of the
material that is typically included during particle simulation.</li>
<li><strong>df_group2</strong> &#8211; (<code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code>, optional): A seperate DF, representing the geometry
of the material that is typically included during particle simulation.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">(g, fig) for plotting.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Mu2E</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Mu2E Experiment Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="field_view.html">The Mu2E Magnetic Fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataframeprod.html">Prepping Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="fitting.html">Fitting Data</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Plotting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-mu2e.mu2eplots">The <cite>mu2eplots</cite> Module</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="fitting.html" title="previous chapter">Fitting Data</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Brian Pollack.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="_sources/plotting.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>