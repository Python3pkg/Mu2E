

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Implementation of Functional Forms &mdash; Mu2E 1.0.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  

  
    <link rel="top" title="Mu2E 1.0.0 documentation" href="index.html"/>
        <link rel="next" title="Plotting" href="plotting.html"/>
        <link rel="prev" title="Fitting Data" href="fitting.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Mu2E
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Mu2E Experiment Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="field_view.html">The Mu2E Magnetic Fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="formula.html">Mathematical Formalism</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataframeprod.html">Prepping Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="hallprobing.html">Hall Probe Measurements</a></li>
<li class="toctree-l1"><a class="reference internal" href="fitting.html">Fitting Data</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Implementation of Functional Forms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-mu2e.tools.fit_funcs">The <cite>fit_funcs</cite> Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="plotting.html">Plotting</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Mu2E</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Implementation of Functional Forms</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/fit_funcs.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="implementation-of-functional-forms">
<h1>Implementation of Functional Forms<a class="headerlink" href="#implementation-of-functional-forms" title="Permalink to this headline">¶</a></h1>
<p>The <cite>fit_funcs.py</cite> module contains the actual implementation of the mathematical formulation of the
magnetic field.  Due to the number of free parameters and the need for high performance, the
functions can become complicated and difficult to follow.</p>
<div class="section" id="module-mu2e.tools.fit_funcs">
<span id="the-fit-funcs-module"></span><h2>The <cite>fit_funcs</cite> Module<a class="headerlink" href="#module-mu2e.tools.fit_funcs" title="Permalink to this headline">¶</a></h2>
<p>Module for implementing the functional forms used for fitting the magnetic field.</p>
<p>This module contains an assortment of factory functions used to produce mathematical expressions
used for the purpose of fitting the magnetic field of the Mu2E experiment.  The expressions
themselves can be expressed much more simply than they are in the following classes and functions;
the reason for their obfuscation is to optimize their performance.  Typically, a given function will
be fit to ~20,000 data points, and have ~1000 free parameters.  Without special care taken to
improve performance, the act of fitting such functions would be untenable.</p>
<p class="rubric">Notes</p>
<ul>
<li><p class="first">All function outputs are created in order to conform with the <cite>lmfit</cite> curve-fitting package.</p>
</li>
<li><dl class="first docutils">
<dt>Factory functions are used to precalculate constants based on the user-defined free</dt>
<dd><p class="first last">parameters. This prevents unnecessary calculations when the derived objective function is
undergoing minimization.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>The <cite>numexpr</cite> and <cite>numba</cite> packages are used in order to compile and parallelize routines that</dt>
<dd><p class="first last">would cause a bottleneck during fitting.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>This module will be updated soon with a class structure to improve readability, reduce code</dt>
<dd><p class="first last">redundancy, and implement the new GPU acceleration features that have been tested in other
branches.</p>
</dd>
</dl>
</li>
</ul>
<p><em>2016 Brian Pollack, Northwestern University</em></p>
<p><a class="reference external" href="mailto:brianleepollack&#37;&#52;&#48;gmail&#46;com">brianleepollack<span>&#64;</span>gmail<span>&#46;</span>com</a></p>
<dl class="function">
<dt id="mu2e.tools.fit_funcs.brzphi_3d_producer_bessel_hybrid">
<code class="descclassname">mu2e.tools.fit_funcs.</code><code class="descname">brzphi_3d_producer_bessel_hybrid</code><span class="sig-paren">(</span><em>z</em>, <em>r</em>, <em>phi</em>, <em>R</em>, <em>ns</em>, <em>ms</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mu2e/tools/fit_funcs.html#brzphi_3d_producer_bessel_hybrid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mu2e.tools.fit_funcs.brzphi_3d_producer_bessel_hybrid" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory function that readies a potential fit function for a 3D magnetic field.
This function creates a modified bessel function expression/</p>
</dd></dl>

<dl class="function">
<dt id="mu2e.tools.fit_funcs.brzphi_3d_producer_modbessel">
<code class="descclassname">mu2e.tools.fit_funcs.</code><code class="descname">brzphi_3d_producer_modbessel</code><span class="sig-paren">(</span><em>z</em>, <em>r</em>, <em>phi</em>, <em>L</em>, <em>ns</em>, <em>ms</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mu2e/tools/fit_funcs.html#brzphi_3d_producer_modbessel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mu2e.tools.fit_funcs.brzphi_3d_producer_modbessel" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory function that readies a potential fit function for a 3D magnetic field.
This function creates a modified bessel function expression/</p>
</dd></dl>

<dl class="function">
<dt id="mu2e.tools.fit_funcs.brzphi_3d_producer_modbessel_phase">
<code class="descclassname">mu2e.tools.fit_funcs.</code><code class="descname">brzphi_3d_producer_modbessel_phase</code><span class="sig-paren">(</span><em>z</em>, <em>r</em>, <em>phi</em>, <em>L</em>, <em>ns</em>, <em>ms</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mu2e/tools/fit_funcs.html#brzphi_3d_producer_modbessel_phase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mu2e.tools.fit_funcs.brzphi_3d_producer_modbessel_phase" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory function that readies a potential fit function for a 3D magnetic field.
This function creates a modified bessel function expression/</p>
</dd></dl>

<dl class="function">
<dt id="mu2e.tools.fit_funcs.pairwise">
<code class="descclassname">mu2e.tools.fit_funcs.</code><code class="descname">pairwise</code><span class="sig-paren">(</span><em>iterable</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mu2e/tools/fit_funcs.html#pairwise"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mu2e.tools.fit_funcs.pairwise" title="Permalink to this definition">¶</a></dt>
<dd><p>s -&gt; (s0,s1), (s2,s3), (s4, s5), ...</p>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="plotting.html" class="btn btn-neutral float-right" title="Plotting" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="fitting.html" class="btn btn-neutral" title="Fitting Data" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Brian Pollack.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>